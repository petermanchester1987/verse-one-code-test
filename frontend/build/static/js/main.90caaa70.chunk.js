(this.webpackJsonprobotshop=this.webpackJsonprobotshop||[]).push([[0],{93:function(e,t,c){},94:function(e,t,c){},95:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c(0),n=c.n(s),r=c(18),i=c.n(r),j=c(11),o=c(22),d=c(58),l=c(59),b=c(16),h="PRODUCT_LIST_REQUEST",u="PRODUCT_LIST_SUCCESS",O="PRODUCT_LIST_FAIL",p="PRODUCT_DETAILS_REQUEST",x="PRODUCT_DETAILS_SUCCESS",m="PRODUCT_DETAILS_FAIL",f=c(24),y="BASKET_ADD_ITEM",g="BASKET_REMOVE_ITEM",v=Object(o.combineReducers)({productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return{loading:!0,products:[]};case u:return{loading:!1,products:t.payload};case O:return{loading:!1,error:t.payload};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{reviews:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(b.a)({loading:!0},e);case x:return{loading:!1,product:t.payload};case m:return{loading:!1,error:t.payload};default:return e}},basket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{basketItems:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:var c=t.payload,a=e.basketItems.find((function(e){return e.product===c.product}));return a?Object(b.a)(Object(b.a)({},e),{},{basketItems:e.basketItems.map((function(e){return e.product===a.product?c:e}))}):Object(b.a)(Object(b.a)({},e),{},{basketItems:[].concat(Object(f.a)(e.basketItems),[c])});case g:return Object(b.a)(Object(b.a)({},e),{},{basketItems:e.basketItems.filter((function(e){return e.product!==t.payload}))});default:return e}}}),k={basket:{basketItems:localStorage.getItem("basketItems")?JSON.parse(localStorage.getItem("basketItems")):[]}},I=[d.a],S=Object(o.createStore)(v,k,Object(l.composeWithDevTools)(o.applyMiddleware.apply(void 0,I))),N=c(9),T=c(6),w=c(98),C=c(40),L=c(101),E=c(103),_=c(38),P=c(102),R=c(97),D=function(e){var t=e.history,c=Object(s.useState)(""),n=Object(_.a)(c,2),r=n[0],i=n[1];return Object(a.jsxs)(P.a,{className:"ml-auto",onSubmit:function(e){e.preventDefault(),r.trim()?t.push("/search/".concat(encodeURIComponent(r))):t.push("/")},inline:!0,children:[Object(a.jsx)(P.a.Control,{type:"text",name:"q",onChange:function(e){return i(e.target.value)},placeholder:"Search Products...",className:"mr-sm-2 ml-sm5"}),Object(a.jsx)(R.a,{type:"submit",variant:"outline-primary",className:"p-2",children:"Search"})]})},B=function(){return Object(a.jsx)("header",{children:Object(a.jsx)(L.a,{bg:"light",expand:"lg",collapseOnSelect:!0,children:Object(a.jsxs)(w.a,{children:[Object(a.jsx)(C.LinkContainer,{to:"/",children:Object(a.jsxs)(L.a.Brand,{children:[Object(a.jsx)("i",{className:"fas fa-robot"})," Robot Shop"]})}),Object(a.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(L.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsx)(T.d,{render:function(e){var t=e.history;return Object(a.jsx)(D,{history:t})}}),Object(a.jsxs)(E.a,{className:"ml-auto",children:[Object(a.jsx)(C.LinkContainer,{to:"/",children:Object(a.jsxs)(E.a.Link,{children:[Object(a.jsx)("i",{className:"fas fa-robot"})," Products"]})}),Object(a.jsx)(C.LinkContainer,{to:"/basket",children:Object(a.jsxs)(E.a.Link,{children:[Object(a.jsx)("i",{className:"fas fa-shopping-basket"})," Basket"]})})]})]})]})})})},A=c(99),U=c(60),q=function(){return Object(a.jsx)("footer",{children:Object(a.jsx)(w.a,{children:Object(a.jsx)(A.a,{children:Object(a.jsx)(U.a,{className:"text-center py-3",children:"\xa9 Peter Manchester 2020"})})})})},M=c(104),F=function(e){var t=e.value,c=e.text,s=e.colour;return Object(a.jsxs)("div",{className:"rating",children:[Object(a.jsx)("span",{children:Object(a.jsx)("i",{style:{color:s},className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})}),Object(a.jsx)("span",{children:Object(a.jsx)("i",{style:{color:s},className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(a.jsx)("span",{children:Object(a.jsx)("i",{style:{color:s},className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(a.jsx)("span",{children:Object(a.jsx)("i",{style:{color:s},className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(a.jsx)("span",{children:Object(a.jsx)("i",{style:{color:s},className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(a.jsx)("span",{children:c&&c})]})};F.defaultProps={colour:"#333333"};var J=F,W=function(e){var t=e.product;return Object(a.jsx)(N.Link,{to:"/product/".concat(t._id),children:Object(a.jsxs)(M.a,{style:{maxWidth:"300px",height:"480px"},className:"my-3 p-3 rounded productcard",children:[Object(a.jsx)(M.a.Img,{style:{maxWidth:"250px",maxHeight:"250px"},src:t.image,className:"img-fluid card-img-top",variant:"top"}),Object(a.jsxs)(M.a.Body,{children:[Object(a.jsx)(M.a.Title,{as:"h3",children:Object(a.jsx)("strong",{children:t.name})}),Object(a.jsx)(M.a.Text,{as:"div",children:Object(a.jsx)(J,{value:t.rating,text:"".concat(t.numReviews," reviews")})}),Object(a.jsxs)(M.a.Text,{as:"h3",children:["\xa3",t.price]})]})]})})},Q=c(21),K=c.n(Q),Y=c(27),H=c(28),V=c.n(H),z=function(e){var t=e.match.params.keyword,c=Object(j.b)(),n=Object(j.c)((function(e){return e.productList})),r=n.loading,i=n.error,o=n.products;return Object(s.useEffect)((function(){c(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(Y.a)(K.a.mark((function t(c){var a,s;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c({type:h}),t.next=4,V.a.get("/api/products?keyword=".concat(e));case 4:a=t.sent,s=a.data,c({type:u,payload:s}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),c({type:O,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[c,t]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h1",{className:"py-5",children:[" ",Object(a.jsx)("i",{className:"fas fa-robot"})," Robot Shop"]}),r?Object(a.jsx)("h2",{children:"Loading..."}):i?Object(a.jsx)("h3",{children:i}):Object(a.jsx)(A.a,{children:o.map((function(e){return Object(a.jsx)(U.a,{sm:12,md:6,lg:4,children:Object(a.jsx)(W,{product:e})},e._id)}))})]})},G=c(100),X=c(105),Z=function(e){var t=e.history,c=e.match,n=Object(s.useState)(1),r=Object(_.a)(n,2),i=r[0],o=r[1],d=Object(j.b)(),l=Object(j.c)((function(e){return e.productDetails})),b=l.product,h=l.error,u=l.loading;Object(s.useEffect)((function(){var e;d((e=c.params.id,function(){var t=Object(Y.a)(K.a.mark((function t(c){var a,s;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c({type:p}),t.next=4,V.a.get("/api/products/".concat(e));case 4:a=t.sent,s=a.data,c({type:x,payload:s}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),c({type:m,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[d,c]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(N.Link,{to:"/",className:"btn btn-primary my-5",children:"Back To Products"}),u?Object(a.jsx)("h2",{children:"Loading..."}):h?Object(a.jsx)("h3",{children:h}):Object(a.jsxs)(A.a,{children:[Object(a.jsx)(U.a,{sm:6,md:6,children:Object(a.jsx)(G.a,{src:b.image,alt:b.name,fluid:!0})}),Object(a.jsx)(U.a,{sm:6,md:3,children:Object(a.jsxs)(X.a,{variant:"flush",children:[Object(a.jsx)(X.a.Item,{children:Object(a.jsx)("h2",{children:b.name})}),Object(a.jsx)(X.a.Item,{children:Object(a.jsx)(J,{value:b.rating,text:"".concat(b.numReviews," reviews")})}),Object(a.jsx)(X.a.Item,{children:Object(a.jsxs)("h4",{children:["Price: \xa3",b.price]})}),Object(a.jsx)(X.a.Item,{children:Object(a.jsx)("p",{children:b.description})})]})}),Object(a.jsx)(U.a,{sm:6,md:3,children:Object(a.jsx)(M.a,{children:Object(a.jsxs)(X.a,{variant:"flush",children:[Object(a.jsx)(X.a.Item,{children:Object(a.jsxs)(A.a,{children:[Object(a.jsx)(U.a,{children:"Price:"}),Object(a.jsx)(U.a,{children:Object(a.jsxs)("strong",{children:["\xa3 ",b.price]})})]})}),Object(a.jsx)(X.a.Item,{children:Object(a.jsxs)(A.a,{children:[Object(a.jsx)(U.a,{children:"Status:"}),Object(a.jsx)(U.a,{children:Object(a.jsx)("strong",{children:b.countInStock>0?"In Stock":"Out of Stock"})})]})}),b.countInStock>0&&Object(a.jsx)(X.a.Item,{children:Object(a.jsxs)(A.a,{children:[Object(a.jsx)(U.a,{children:"Quantity"}),Object(a.jsx)(U.a,{children:Object(a.jsx)(P.a.Control,{as:"select",value:i,onChange:function(e){return o(e.target.value)},children:Object(f.a)(Array(b.countInStock).keys()).map((function(e){return Object(a.jsx)("option",{value:e+1,children:e+1},e+1)}))})})]})}),Object(a.jsx)(X.a.Item,{children:Object(a.jsx)(R.a,{onClick:function(){t.push("/basket/".concat(c.params.id,"?qty=").concat(i))},className:"btn btn-block",type:"button",disabled:b.countInStock<1,children:"Add to Basket"})})]})})})]})]})},$=function(e,t){return function(){var c=Object(Y.a)(K.a.mark((function c(a,s){var n,r;return K.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,V.a.get("/api/products/".concat(e));case 2:n=c.sent,r=n.data,a({type:y,payload:{product:r._id,name:r.name,image:r.image,price:r.price,countInStock:r.countInStock,qty:t}}),localStorage.setItem("basketItems",JSON.stringify(s().basket.basketItems));case 6:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}()},ee=function(e){var t=e.match,c=e.location,n=e.history,r=t.params.id,i=c.search?Number(c.search.split("=")[1]):1,o=Object(j.b)(),d=Object(j.c)((function(e){return e.basket})).basketItems;Object(s.useEffect)((function(){r&&o($(r,i))}),[o,r,i]);var l=function(e){o(function(e){return function(t,c){t({type:g,payload:e}),localStorage.setItem("basketItems",JSON.stringify(c().basket.basketItems))}}(e))};return Object(a.jsx)("div",{children:Object(a.jsxs)(A.a,{children:[Object(a.jsxs)(U.a,{md:8,children:[Object(a.jsx)("h2",{className:"my-3",children:"Your Shopping Basket"}),0===d.length?Object(a.jsxs)("div",{children:[Object(a.jsx)(N.Link,{to:"/",className:"btn btn-primary my-5",children:"Back To Products"}),Object(a.jsx)("h3",{children:"Your Shopping Basket is Empty..."})]}):Object(a.jsx)(X.a,{variant:"flush",children:d.map((function(e){return Object(a.jsx)(X.a.Item,{children:Object(a.jsxs)(A.a,{children:[Object(a.jsx)(U.a,{md:3,children:Object(a.jsx)(G.a,{src:e.image,alt:e.name,fluid:!0})}),Object(a.jsx)(U.a,{md:3,children:Object(a.jsx)(N.Link,{to:"/product/".concat(e.product),children:Object(a.jsx)("h5",{children:e.name})})}),Object(a.jsxs)(U.a,{md:2,children:["\xa3",e.price]}),Object(a.jsx)(U.a,{md:2,children:Object(a.jsx)(P.a.Control,{as:"select",value:e.qty,onChange:function(t){return o($(e.product,Number(t.target.value)))},children:Object(f.a)(Array(e.countInStock).keys()).map((function(e){return Object(a.jsx)("option",{value:e+1,children:e+1},e+1)}))})}),Object(a.jsx)(U.a,{md:2,children:Object(a.jsx)(R.a,{type:"button",variant:"danger",onClick:function(){return l(e.product)},children:Object(a.jsx)("i",{className:"fas fa-times"})})})]})},e.product)}))})]}),Object(a.jsx)(U.a,{md:4,children:Object(a.jsx)(M.a,{children:Object(a.jsxs)(X.a,{variant:"flush",children:[Object(a.jsxs)(X.a.Item,{children:[Object(a.jsxs)("h4",{children:["Subtotal - ",d.reduce((function(e,t){return e+t.qty}),0)," Items"]}),"\xa3",d.reduce((function(e,t){return e+t.qty*t.price}),0).toFixed(2)]}),Object(a.jsx)(X.a.Item,{children:Object(a.jsx)(R.a,{type:"button",className:"btn btn-block",disabled:0===d.length,onClick:function(){n.push("/shipping")},children:"Proceed To Checkout"})})]})})})]})})},te=function(e){e.history;var t=Object(j.c)((function(e){return e.basket})).basketItems;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{className:"my-3",children:"Shipping Screen"}),Object(a.jsx)(A.a,{children:Object(a.jsx)(U.a,{md:"8",children:Object(a.jsx)(X.a,{variant:"flush",children:t.map((function(e){return Object(a.jsx)(X.a.Item,{children:Object(a.jsxs)(A.a,{children:[Object(a.jsx)(U.a,{md:3,children:Object(a.jsx)(G.a,{src:e.image,alt:e.name,fluid:!0})}),Object(a.jsx)(U.a,{md:3,children:Object(a.jsx)(N.Link,{to:"/product/".concat(e.product),children:Object(a.jsx)("h5",{children:e.name})})}),Object(a.jsxs)(U.a,{md:2,children:["\xa3",e.price]}),Object(a.jsx)(U.a,{md:2,children:e.qty}),Object(a.jsx)(U.a,{md:2})]})},e.product)}))})})}),Object(a.jsx)(P.a,{className:"my-5",children:Object(a.jsxs)(X.a,{children:[Object(a.jsx)(X.a.Item,{children:Object(a.jsx)("p",{children:"If we were actually doing a checkout I'd make the user input the address here"})}),Object(a.jsx)(X.a.Item,{children:Object(a.jsx)("p",{children:"Make the address update the state"})}),Object(a.jsx)(X.a.Item,{children:Object(a.jsx)("p",{children:"Even if the user is meant to be anonymous"})}),Object(a.jsx)(X.a.Item,{children:Object(a.jsx)("p",{children:"We have to know where to send the goods"})})]})}),Object(a.jsx)(R.a,{className:"my-3",children:"Proceed to Payment"})]})};var ce=function(){return Object(a.jsx)(N.BrowserRouter,{children:Object(a.jsxs)(s.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsx)("main",{className:"py-3",children:Object(a.jsxs)(w.a,{children:[Object(a.jsx)(T.d,{path:"/",exact:!0,component:z}),Object(a.jsx)(T.d,{path:"/product/:id",component:Z}),Object(a.jsx)(T.d,{path:"/basket/:id?",component:ee}),Object(a.jsx)(T.d,{path:"/shipping",component:te}),Object(a.jsx)(T.d,{path:"/search/:keyword",component:z})]})}),Object(a.jsx)(q,{})]})})};c(93),c(94);i.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(j.a,{store:S,children:Object(a.jsx)(ce,{})})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.90caaa70.chunk.js.map